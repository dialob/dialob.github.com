{"swagger":"2.0","info":{"version":"0.6.0-SNAPSHOT","title":"Dialob REST api","contact":{"name":"ReSys","url":"http://www.dialob.io","email":"support@resys.io"},"license":{"name":"ASL v2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"}},"host":"localhost:8082","basePath":"/api","tags":[{"name":"questionnaire-rest-controller","description":"Questionnaire Rest Controller"},{"name":"forms-rest-controller","description":"Forms Rest Controller"}],"schemes":["http"],"paths":{"/forms/{formId}":{"get":{"tags":["forms-rest-controller"],"summary":"getForm","operationId":"getFormUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"formId","in":"path","description":"formId","required":true,"type":"string"},{"name":"rev","in":"query","description":"rev","required":false,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/FormDocument"}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/Errors"}}},"security":[{"Authorization":[]}]},"put":{"tags":["forms-rest-controller"],"summary":"putForm","operationId":"putFormUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"formId","in":"path","description":"formId","required":true,"type":"string"},{"name":"oldId","in":"query","description":"oldId","required":false,"type":"string"},{"name":"newId","in":"query","description":"newId","required":false,"type":"string"},{"in":"body","name":"formDocument","description":"formDocument","required":true,"schema":{"$ref":"#/definitions/FormDocument"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/FormPutResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/Errors"}},"422":{"description":"Unprocessable entity","schema":{"$ref":"#/definitions/Errors"}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/Errors"}},"209":{"description":"Conflict","schema":{"$ref":"#/definitions/Conflict"}}},"security":[{"Authorization":[]}]}},"/questionnaires":{"get":{"tags":["questionnaire-rest-controller"],"summary":"getQuestionnaires","operationId":"getQuestionnairesUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"active","in":"query","description":"active","required":false,"type":"boolean","default":false}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/QuestionnaireListItem"}}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/Errors"}}},"security":[{"Authorization":[]}]},"post":{"tags":["questionnaire-rest-controller"],"summary":"postQuestionnaire","operationId":"postQuestionnaireUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"questionnaire","description":"questionnaire","required":true,"schema":{"$ref":"#/definitions/Questionnaire"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/EntityCreated"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/Errors"}},"422":{"description":"Unprocessable entity","schema":{"$ref":"#/definitions/Errors"}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}}},"security":[{"Authorization":[]}]}},"/questionnaires/{questionnaireId}":{"get":{"tags":["questionnaire-rest-controller"],"summary":"getQuestionnaire","operationId":"getQuestionnaireUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"questionnaireId","in":"path","description":"questionnaireId","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Questionnaire"}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/Errors"}}},"security":[{"Authorization":[]}]}},"/questionnaires/{questionnaireId}/answers":{"get":{"tags":["questionnaire-rest-controller"],"summary":"getQuestionnaireAnswers","operationId":"getQuestionnaireAnswersUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"questionnaireId","in":"path","description":"questionnaireId","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/Answer"}}},"403":{"description":"Access denied","schema":{"$ref":"#/definitions/Errors"}},"404":{"description":"Not found","schema":{"$ref":"#/definitions/Errors"}}},"security":[{"Authorization":[]}]}}},"securityDefinitions":{"Authorization":{"type":"apiKey","name":"Authorization","in":"header"}},"definitions":{"RuleBuilderError":{"type":"object","properties":{"endIndex":{"type":"integer","format":"int32"},"itemId":{"type":"string"},"message":{"type":"string"},"startIndex":{"type":"integer","format":"int32"},"type":{"type":"string","enum":["VISIBILITY","VALIDATION","REQUIREMENT","VARIABLE","GENERAL"]}}},"QueryParameter":{"type":"object","required":["expression","parameter"],"properties":{"expression":{"type":"string"},"parameter":{"type":"string"}}},"Questionnaire":{"type":"object","required":["metadata"],"properties":{"_id":{"type":"string"},"_rev":{"type":"string"},"activeItem":{"type":"string"},"answers":{"type":"array","items":{"$ref":"#/definitions/Answer"}},"context":{"type":"array","items":{"$ref":"#/definitions/ContextValue"}},"metadata":{"$ref":"#/definitions/Metadata"},"tables":{"type":"array","items":{"$ref":"#/definitions/Table"}}}},"Table":{"type":"object","properties":{"rows":{"type":"array","items":{"type":"string"}},"tableId":{"type":"string"}}},"FormValueSetBean":{"type":"object","properties":{"entries":{"type":"array","items":{"$ref":"#/definitions/FormValueSetEntryBean"}},"id":{"type":"string"}}},"Metadata":{"type":"object","required":["formId"],"properties":{"created":{"type":"string","format":"date-time"},"formId":{"type":"string"},"formRev":{"type":"string"},"label":{"type":"string"},"language":{"type":"string"},"lastAnswer":{"type":"string","format":"date-time"},"reason":{"type":"string","enum":["SKIPPED","CANCELLED"]},"status":{"type":"string","enum":["NEW","OPEN","COMPLETED"]},"submitUrl":{"type":"string"},"tenantId":{"type":"string"}}},"Error":{"type":"object","properties":{"code":{"type":"string","description":"Error classifying code"},"context":{"type":"string","description":"Javascript path notation to entity attribute"},"error":{"type":"string","description":"Error description"},"rejectedValue":{"type":"object","description":"Invalid value on entity attribute"}}},"FormVariableBean":{"type":"object","properties":{"context":{"type":"boolean"},"contextType":{"type":"string"},"defaultValue":{"type":"object"},"expression":{"type":"string"},"name":{"type":"string"}}},"FormPutResponse":{"type":"object","properties":{"error":{"type":"string"},"errors":{"type":"array","items":{"$ref":"#/definitions/RuleBuilderError"}},"form":{"$ref":"#/definitions/FormDocument"},"id":{"type":"string"},"ok":{"type":"boolean"},"reason":{"type":"string"},"rev":{"type":"string"}}},"FormMetadata":{"type":"object","required":["label"],"properties":{"created":{"type":"string","format":"date"},"creator":{"type":"string"},"defaultSubmitUrl":{"type":"string"},"label":{"type":"string"},"labels":{"type":"array","items":{"type":"string"}},"languages":{"type":"array","items":{"type":"string"}},"lastSaved":{"type":"string","format":"date"},"savedBy":{"type":"string"},"tenantId":{"type":"string"},"valid":{"type":"boolean"}}},"OutputVariable":{"type":"object","required":["path","type","variable"],"properties":{"path":{"type":"string"},"type":{"type":"string"},"variable":{"type":"string"}}},"FormValueSetEntryBean":{"type":"object","properties":{"id":{"type":"string"},"label":{"type":"object","additionalProperties":{"type":"string"}}}},"FormItemBean":{"type":"object","properties":{"activeWhen":{"type":"string"},"className":{"type":"array","items":{"type":"string"}},"defaultValue":{"type":"string"},"description":{"type":"object","additionalProperties":{"type":"string"}},"id":{"type":"string"},"items":{"type":"array","items":{"type":"string"}},"label":{"type":"object","additionalProperties":{"type":"string"}},"readOnly":{"type":"boolean"},"required":{"type":"string"},"style":{"type":"string"},"type":{"type":"string"},"validations":{"type":"array","items":{"$ref":"#/definitions/ValidationBean"}},"valueSetId":{"type":"string"}}},"Errors":{"type":"object","properties":{"error":{"type":"string"},"errors":{"type":"array","description":"List of identified errors in entity","items":{"$ref":"#/definitions/Error"}},"message":{"type":"string"},"path":{"type":"string"},"status":{"type":"integer","format":"int32","example":403,"description":"HTTP status code"},"timestamp":{"type":"string","format":"date","description":"error timestamp"},"trace":{"type":"string","description":"Java stacktrace, if server is configured to send one."}}},"Answer":{"type":"object","properties":{"id":{"type":"string"},"value":{"type":"object"}}},"FormDocument":{"type":"object","properties":{"_id":{"type":"string"},"_rev":{"type":"string"},"data":{"type":"object","additionalProperties":{"$ref":"#/definitions/FormItemBean"}},"metadata":{"$ref":"#/definitions/FormMetadata"},"namespaces":{"type":"object","additionalProperties":{"$ref":"#/definitions/FormDocument"}},"serviceCalls":{"type":"object","additionalProperties":{"$ref":"#/definitions/FormServiceCall"}},"valueSets":{"type":"array","items":{"$ref":"#/definitions/FormValueSetBean"}},"variables":{"type":"array","items":{"$ref":"#/definitions/FormVariableBean"}}}},"ContextValue":{"type":"object","properties":{"id":{"type":"string"},"value":{"type":"string"}}},"QuestionnaireListItem":{"type":"object","properties":{"id":{"type":"string"},"metadata":{"$ref":"#/definitions/Metadata"}}},"EntityCreated":{"type":"object","required":["_id","_rev"],"properties":{"_id":{"type":"string","example":"09fb4770a3359daaeb22aa513200b4d6","description":"Identifier of created questionnaire entity","readOnly":true},"_rev":{"type":"string","example":"1-dde0662a3917ea7aa991893f96a6accb","readOnly":true}}},"FormServiceCall":{"type":"object","required":["id","serviceId"],"properties":{"id":{"type":"string"},"outputVariable":{"type":"array","items":{"$ref":"#/definitions/OutputVariable"}},"outputVariables":{"type":"array","items":{"$ref":"#/definitions/OutputVariable"}},"queryParameters":{"type":"array","items":{"$ref":"#/definitions/QueryParameter"}},"serviceId":{"type":"string"}}},"ValidationBean":{"type":"object","properties":{"message":{"type":"object","additionalProperties":{"type":"string"}},"rule":{"type":"string"}}}}}